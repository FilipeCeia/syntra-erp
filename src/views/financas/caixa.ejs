


<!-- Status do Caixa -->
<div class="row">
  <div class="col-lg-4 col-6">
    <div class="small-box bg-success">
      <div class="inner">
        <h3>45.000,00 MT</h3>
        <p>Saldo Atual</p>
      </div>
      <div class="icon">
        <i class="fas fa-cash-register"></i>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4 col-6">
    <div class="small-box bg-info">
      <div class="inner">
        <h3>12.500,00 MT</h3>
        <p>Entradas Hoje</p>
      </div>
      <div class="icon">
        <i class="fas fa-arrow-down"></i>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4 col-6">
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>8.750,00 MT</h3>
        <p>Saídas Hoje</p>
      </div>
      <div class="icon">
        <i class="fas fa-arrow-up"></i>
      </div>
    </div>
  </div>
</div>

<!-- Ações Rápidas -->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-tools mr-1"></i>
          Ações Rápidas
        </h3>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-3">
            <button type="button" class="btn btn-success btn-block" onclick="abrirCaixa()">
              <i class="fas fa-unlock"></i> Abrir Caixa
            </button>
          </div>
          <div class="col-md-3">
            <button type="button" class="btn btn-danger btn-block" onclick="fecharCaixa()">
              <i class="fas fa-lock"></i> Fechar Caixa
            </button>
          </div>
          <div class="col-md-3">
            <button type="button" class="btn btn-info btn-block" onclick="novaEntrada()">
              <i class="fas fa-plus"></i> Nova Entrada
            </button>
          </div>
          <div class="col-md-3">
            <button type="button" class="btn btn-warning btn-block" onclick="novaSaida()">
              <i class="fas fa-minus"></i> Nova Saída
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Movimentos do Dia -->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-list mr-1"></i>
          Movimentos do Dia
        </h3>
        <div class="card-tools">
          <a href="/financas/caixa/movimentos" class="btn btn-primary btn-sm">
            <i class="fas fa-history"></i> Histórico Completo
          </a>
        </div>
      </div>
      <div class="card-body table-responsive p-0">
        <table class="table table-hover text-nowrap">
          <thead>
            <tr>
              <th>Hora</th>
              <th>Tipo</th>
              <th>Descrição</th>
              <th>Valor</th>
              <th>Saldo</th>
              <th>Usuário</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>14:30</td>
              <td><span class="badge badge-success">Entrada</span></td>
              <td>Venda à vista - Cliente ABC</td>
              <td class="text-success">+ 5.000,00 MT</td>
              <td>45.000,00 MT</td>
              <td>João Silva</td>
            </tr>
            <tr>
              <td>13:15</td>
              <td><span class="badge badge-danger">Saída</span></td>
              <td>Pagamento fornecedor</td>
              <td class="text-danger">- 2.500,00 MT</td>
              <td>40.000,00 MT</td>
              <td>Maria Santos</td>
            </tr>
            <tr>
              <td>11:45</td>
              <td><span class="badge badge-success">Entrada</span></td>
              <td>Recebimento de cliente</td>
              <td class="text-success">+ 7.500,00 MT</td>
              <td>42.500,00 MT</td>
              <td>João Silva</td>
            </tr>
            <tr>
              <td>09:00</td>
              <td><span class="badge badge-info">Abertura</span></td>
              <td>Abertura do caixa</td>
              <td>35.000,00 MT</td>
              <td>35.000,00 MT</td>
              <td>João Silva</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Entrada -->
<div class="modal fade" id="modalEntrada" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Nova Entrada</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form id="formEntrada">
        <div class="modal-body">
          <div class="form-group">
            <label>Valor</label>
            <input type="number" name="valor" class="form-control" step="0.01" required>
          </div>
          <div class="form-group">
            <label>Descrição</label>
            <input type="text" name="descricao" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Categoria</label>
            <select name="categoria" class="form-control" required>
              <option value="">Selecione...</option>
              <option value="vendas">Vendas</option>
              <option value="recebimentos">Recebimentos</option>
              <option value="outros">Outros</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-success">Registrar Entrada</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal de Saída -->
<div class="modal fade" id="modalSaida" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Nova Saída</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form id="formSaida">
        <div class="modal-body">
          <div class="form-group">
            <label>Valor</label>
            <input type="number" name="valor" class="form-control" step="0.01" required>
          </div>
          <div class="form-group">
            <label>Descrição</label>
            <input type="text" name="descricao" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Categoria</label>
            <select name="categoria" class="form-control" required>
              <option value="">Selecione...</option>
              <option value="pagamentos">Pagamentos</option>
              <option value="despesas">Despesas</option>
              <option value="outros">Outros</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-danger">Registrar Saída</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
function abrirCaixa() {
  Swal.fire({
    title: 'Abrir Caixa',
    input: 'number',
    inputLabel: 'Valor inicial (MT)',
    inputPlaceholder: '0.00',
    showCancelButton: true,
    confirmButtonText: 'Abrir',
    cancelButtonText: 'Cancelar'
  }).then((result) => {
    if (result.isConfirmed) {
      toastr.success('Caixa aberto com sucesso!');
    }
  });
}

function fecharCaixa() {
  Swal.fire({
    title: 'Fechar Caixa',
    text: 'Tem certeza que deseja fechar o caixa?',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonText: 'Sim, fechar',
    cancelButtonText: 'Cancelar'
  }).then((result) => {
    if (result.isConfirmed) {
      toastr.success('Caixa fechado com sucesso!');
    }
  });
}

function novaEntrada() {
  $('#modalEntrada').modal('show');
}

function novaSaida() {
  $('#modalSaida').modal('show');
}

$('#formEntrada, #formSaida').on('submit', function(e) {
  e.preventDefault();
  $(this).closest('.modal').modal('hide');
  toastr.success('Movimento registrado com sucesso!');
});
</script>